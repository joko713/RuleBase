<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Award & Pay Rate Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #4f46e5;
            --primary-color-light: #e0e7ff;
            --primary-color-dark: #3730a3;
            --success-bg: #f0fdf4;
            --success-border: #22c55e;
            --info-bg: #eff6ff;
            --info-border: #3b82f6;
            --error-bg: #fef2f2;
            --error-border: #ef4444;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }

        .step-card {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .step-card.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .result-box {
            background-color: var(--success-bg);
            border-left: 4px solid var(--success-border);
        }
        .info-box {
            background-color: var(--info-bg);
            border-left: 4px solid var(--info-border);
        }
        .error-box {
            background-color: var(--error-bg);
            border-left: 4px solid var(--error-border);
        }

        select, button, input[type="number"] {
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }

        select:focus, input:focus {
            outline: none;
            box-shadow: 0 0 0 3px var(--primary-color-light);
            border-color: var(--primary-color);
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-color-dark);
        }

        .progress-bar-bg {
            background-color: #e5e7eb;
        }
        .progress-bar {
            background-color: var(--primary-color);
            transition: width 0.4s ease-in-out;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-2xl mx-auto bg-white rounded-2xl shadow-xl p-6 md:p-8">
        <header class="text-center mb-6">
            <h1 class="text-3xl font-bold text-gray-900 flex items-center justify-center gap-3">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-indigo-600"><path d="M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z"/></svg>
                Award & Pay Rate Tool
            </h1>
            <p class="text-gray-500 mt-2">Based on Professional Employees Award [MA000065]</p>
        </header>

        <!-- Progress Bar -->
        <div class="w-full mb-8">
            <div class="flex justify-between mb-1">
                <span id="progress-text" class="text-sm font-medium text-gray-700">Step 1 of 3</span>
                <span id="progress-percent" class="text-sm font-medium text-gray-700">0%</span>
            </div>
            <div class="w-full progress-bar-bg rounded-full h-2.5">
                <div id="progress-bar" class="progress-bar h-2.5 rounded-full" style="width: 0%"></div>
            </div>
        </div>

        <main id="calculator-container">
            <!-- Step 1: IT Employee? -->
            <div id="step-1" class="step-card active space-y-4">
                <label for="is-it-employee" class="block text-lg font-semibold text-gray-700">1. Is the employee an IT employee?</label>
                <p class="text-sm text-gray-500">This includes roles like developers, IT support, system analysts, web designers, etc.</p>
                <select id="is-it-employee" class="w-full p-3 bg-gray-50 border border-gray-300 rounded-lg">
                    <option value="" selected disabled>Select an option...</option>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                </select>
            </div>

            <!-- Step 2: IT - Qualified? -->
            <div id="step-it-qualified" class="step-card space-y-4">
                <label for="is-qualified" class="block text-lg font-semibold text-gray-700">2. Is the IT employee qualified?</label>
                <p class="text-sm text-gray-500">A "qualified" employee has sufficient qualifications (e.g., relevant university degree) and experience to be classified under the Professional Award.</p>
                <select id="is-qualified" class="w-full p-3 bg-gray-50 border border-gray-300 rounded-lg">
                    <option value="" selected disabled>Select an option...</option>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                </select>
            </div>
            
            <!-- More IT Questions will be dynamically inserted here by JS -->

            <!-- Final Result Section -->
            <div id="result-section" class="step-card space-y-6">
                <div class="text-center">
                    <h2 class="text-2xl font-bold text-gray-800">Determination Result</h2>
                    <p class="text-gray-500">Based on your selections, here is the likely outcome.</p>
                </div>
                <div id="award-result" class="p-4 rounded-lg"></div>
                
                <!-- Pay Calculator (for Professional Award) -->
                <div id="pay-calculator" class="hidden space-y-4 pt-6 mt-6 border-t">
                    <h3 class="text-xl font-semibold text-gray-700 flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-500"><rect x="4" y="2" width="16" height="20" rx="2"/><line x1="8" y1="6" x2="16" y2="6"/><line x1="16" y1="14" x2="8" y2="14"/><line x1="16" y1="18" x2="8" y2="18"/><line x1="10" y1="10" x2="14" y2="10"/></svg>
                        Pay Rate Calculator
                    </h3>
                    <div>
                        <label for="classification" class="block font-medium text-gray-700 mb-1">Classification</label>
                        <select id="classification" class="w-full p-3 bg-gray-50 border border-gray-300 rounded-lg"></select>
                    </div>
                    <div>
                        <label class="block font-medium text-gray-700 mb-1">Employment Type</label>
                        <div class="flex gap-4 p-3 bg-gray-50 rounded-lg border">
                            <label class="flex items-center flex-1"><input type="radio" name="employment-type" value="full-time" class="mr-2" checked> Full-time / Part-time</label>
                            <label class="flex items-center flex-1"><input type="radio" name="employment-type" value="casual" class="mr-2"> Casual</label>
                        </div>
                    </div>
                    <div>
                        <label for="work-period" class="block font-medium text-gray-700 mb-1">Work Period</label>
                        <select id="work-period" class="w-full p-3 bg-gray-50 border border-gray-300 rounded-lg">
                            <option value="hourly">Ordinary Hours</option>
                            <option value="overtime">Overtime</option>
                            <option value="monSatBefore6am">Monday to Saturday - before 6am</option>
                            <option value="monSatAfter10pm">Monday to Saturday - after 10pm</option>
                            <option value="sunday">Sunday</option>
                            <option value="publicHoliday">Public Holiday</option>
                        </select>
                    </div>
                    <div id="pay-result" class="p-4 rounded-lg text-center"></div>
                </div>

                <!-- Allowance Calculator -->
                <div id="allowance-calculator" class="space-y-4 pt-6 mt-6 border-t">
                     <h3 class="text-xl font-semibold text-gray-700">Allowance Calculator</h3>
                     <div class="flex items-center gap-4">
                        <label for="vehicle-km" class="font-medium text-gray-700">Vehicle Allowance ($0.98 per km)</label>
                        <input type="number" id="vehicle-km" placeholder="Enter km" class="w-40 p-2 border border-gray-300 rounded-lg">
                     </div>
                     <div id="allowance-result" class="p-3 rounded-lg text-center font-semibold"></div>
                </div>
            </div>

            <!-- Restart Button -->
            <div class="mt-8 text-center">
                 <button id="restart-btn" class="hidden btn-primary font-bold py-2 px-6 rounded-lg hover:shadow-lg transition-all flex items-center gap-2 mx-auto">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 2v6h6"/><path d="M21 12A9 9 0 0 0 6 5.3L3 8"/><path d="M21 22v-6h-6"/><path d="M3 12a9 9 0 0 0 15 6.7l3-2.7"/></svg>
                    Start Over
                 </button>
            </div>
        </main>
        
        <footer class="text-center text-xs text-gray-400 mt-8">
            <p>Disclaimer: This tool is for guidance only. Always refer to the full terms of the relevant award. We accept no liability for any inaccuracies.</p>
        </footer>
    </div>

<script>
const payData = {
    "full-time": {
        "Graduate professional - level 1.1 - 3 year degree": { hourly: 32.18, overtime: 32.18, monSatBefore6am: 40.23, monSatAfter10pm: 40.23, sunday: 48.27, publicHoliday: 48.27 },
        "Graduate professional - level 1.1 - 4 or 5 year degree": { hourly: 33.01, overtime: 33.01, monSatBefore6am: 41.26, monSatAfter10pm: 41.26, sunday: 49.52, publicHoliday: 49.52 },
        "Graduate professional - level 1.2": { hourly: 33.56, overtime: 33.56, monSatBefore6am: 41.95, monSatAfter10pm: 41.95, sunday: 50.34, publicHoliday: 50.34 },
        "Graduate professional - level 1.3": { hourly: 34.96, overtime: 34.96, monSatBefore6am: 43.70, monSatAfter10pm: 43.70, sunday: 52.44, publicHoliday: 52.44 },
        "Graduate professional - level 1.4": { hourly: 36.73, overtime: 36.73, monSatBefore6am: 45.91, monSatAfter10pm: 45.91, sunday: 55.10, publicHoliday: 55.10 },
        "Experienced professional/quality auditor - level 2": { hourly: 37.97, overtime: 37.97, monSatBefore6am: 47.46, monSatAfter10pm: 47.46, sunday: 56.96, publicHoliday: 56.96 },
        "Professional/senior (lead) quality auditor - level 3": { hourly: 41.49, overtime: 41.49, monSatBefore6am: 51.86, monSatAfter10pm: 51.86, sunday: 62.24, publicHoliday: 62.24 },
        "Professional - level 4": { hourly: 46.80, overtime: 46.80, monSatBefore6am: 58.50, monSatAfter10pm: 58.50, sunday: 70.20, publicHoliday: 70.20 },
        "Graduate professional medical research employee - level 1 - pay point 1.1 (3 year degree)": { hourly: 32.18, overtime: 32.18, monSatBefore6am: 40.23, monSatAfter10pm: 40.23, sunday: 48.27, publicHoliday: 48.27 },
        "Graduate professional medical research employee - level 1 - pay point 1.1 (4 or 5 year degree)": { hourly: 33.01, overtime: 33.01, monSatBefore6am: 41.26, monSatAfter10pm: 41.26, sunday: 49.52, publicHoliday: 49.52 },
        "Graduate professional medical research employee - level 1 - pay point 1.2": { hourly: 33.56, overtime: 33.56, monSatBefore6am: 41.95, monSatAfter10pm: 41.95, sunday: 50.34, publicHoliday: 50.34 },
        "Graduate professional medical research employee - level 1 - pay point 1.3": { hourly: 34.96, overtime: 34.96, monSatBefore6am: 43.70, monSatAfter10pm: 43.70, sunday: 52.44, publicHoliday: 52.44 },
        "Graduate professional medical research employee - level 1 - pay point 1.4": { hourly: 36.73, overtime: 36.73, monSatBefore6am: 45.91, monSatAfter10pm: 45.91, sunday: 55.10, publicHoliday: 55.10 },
        "Experienced professional medical research employee - level 2": { hourly: 37.97, overtime: 37.97, monSatBefore6am: 47.46, monSatAfter10pm: 47.46, sunday: 56.96, publicHoliday: 56.96 },
        "Experienced medical research employee - level 3": { hourly: 41.49, overtime: 41.49, monSatBefore6am: 51.86, monSatAfter10pm: 51.86, sunday: 62.24, publicHoliday: 62.24 },
        "Experienced medical research employee - level 4": { hourly: 46.80, overtime: 46.80, monSatBefore6am: 58.50, monSatAfter10pm: 58.50, sunday: 70.20, publicHoliday: 70.20 },
        "Experienced medical research employee - level 5": { hourly: 56.38, overtime: 56.38, monSatBefore6am: 70.48, monSatAfter10pm: 70.48, sunday: 84.57, publicHoliday: 84.57 }
    },
    "casual": {
        "Graduate professional - level 1.1 - 3 year degree": { hourly: 40.23, overtime: 40.23, monSatBefore6am: 50.29, monSatAfter10pm: 50.29, sunday: 60.35, publicHoliday: 60.35 },
        "Graduate professional - level 1.1 - 4 or 5 year degree": { hourly: 41.26, overtime: 41.26, monSatBefore6am: 51.58, monSatAfter10pm: 51.58, sunday: 61.89, publicHoliday: 61.89 },
        "Graduate professional - level 1.2": { hourly: 41.95, overtime: 41.95, monSatBefore6am: 52.44, monSatAfter10pm: 52.44, sunday: 62.93, publicHoliday: 62.93 },
        "Graduate professional - level 1.3": { hourly: 43.70, overtime: 43.70, monSatBefore6am: 54.63, monSatAfter10pm: 54.63, sunday: 65.55, publicHoliday: 65.55 },
        "Graduate professional - level 1.4": { hourly: 45.91, overtime: 45.91, monSatBefore6am: 57.39, monSatAfter10pm: 57.39, sunday: 68.87, publicHoliday: 68.87 },
        "Experienced professional/quality auditor - level 2": { hourly: 47.46, overtime: 47.46, monSatBefore6am: 59.33, monSatAfter10pm: 59.33, sunday: 71.19, publicHoliday: 71.19 },
        "Professional/senior (lead) quality auditor - level 3": { hourly: 51.86, overtime: 51.86, monSatBefore6am: 64.83, monSatAfter10pm: 64.83, sunday: 77.79, publicHoliday: 77.79 },
        "Professional - level 4": { hourly: 58.50, overtime: 58.50, monSatBefore6am: 73.13, monSatAfter10pm: 73.13, sunday: 87.75, publicHoliday: 87.75 },
        "Graduate professional medical research employee - level 1 - pay point 1.1 (3 year degree)": { hourly: 40.23, overtime: 40.23, monSatBefore6am: 50.29, monSatAfter10pm: 50.29, sunday: 60.35, publicHoliday: 60.35 },
        "Graduate professional medical research employee - level 1 - pay point 1.1 (4 or 5 year degree)": { hourly: 41.26, overtime: 41.26, monSatBefore6am: 51.58, monSatAfter10pm: 51.58, sunday: 61.89, publicHoliday: 61.89 },
        "Graduate professional medical research employee - level 1 - pay point 1.2": { hourly: 41.95, overtime: 41.95, monSatBefore6am: 52.44, monSatAfter10pm: 52.44, sunday: 62.93, publicHoliday: 62.93 },
        "Graduate professional medical research employee - level 1 - pay point 1.3": { hourly: 43.70, overtime: 43.70, monSatBefore6am: 54.63, monSatAfter10pm: 54.63, sunday: 65.55, publicHoliday: 65.55 },
        "Graduate professional medical research employee - level 1 - pay point 1.4": { hourly: 45.91, overtime: 45.91, monSatBefore6am: 57.39, monSatAfter10pm: 57.39, sunday: 68.87, publicHoliday: 68.87 },
        "Experienced professional medical research employee - level 2": { hourly: 47.46, overtime: 47.46, monSatBefore6am: 59.33, monSatAfter10pm: 59.33, sunday: 71.19, publicHoliday: 71.19 },
        "Experienced medical research employee - level 3": { hourly: 51.86, overtime: 51.86, monSatBefore6am: 64.83, monSatAfter10pm: 64.83, sunday: 77.79, publicHoliday: 77.79 },
        "Experienced medical research employee - level 4": { hourly: 58.50, overtime: 58.50, monSatBefore6am: 73.13, monSatAfter10pm: 73.13, sunday: 87.75, publicHoliday: 87.75 },
        "Experienced medical research employee - level 5": { hourly: 70.48, overtime: 70.48, monSatBefore6am: 88.10, monSatAfter10pm: 88.10, sunday: 105.72, publicHoliday: 105.72 }
    }
};

const classificationSelect = document.getElementById('classification');
Object.keys(payData['full-time']).forEach(classification => {
    const option = document.createElement('option');
    option.value = classification;
    option.textContent = classification;
    classificationSelect.appendChild(option);
});

const elements = {
    steps: document.querySelectorAll('.step-card'),
    restartBtn: document.getElementById('restart-btn'),
    isItEmployee: document.getElementById('is-it-employee'),
    awardResult: document.getElementById('award-result'),
    payCalculator: document.getElementById('pay-calculator'),
    payResult: document.getElementById('pay-result'),
    allowanceResult: document.getElementById('allowance-result'),
    vehicleKm: document.getElementById('vehicle-km'),
    container: document.getElementById('calculator-container'),
    progressBar: document.getElementById('progress-bar'),
    progressText: document.getElementById('progress-text'),
    progressPercent: document.getElementById('progress-percent'),
};

let currentStepNum = 1;
const totalSteps = 3; // Maximum possible steps
const state = {};

function updateProgress(step, maxSteps) {
    const percent = Math.round(((step -1) / maxSteps) * 100);
    elements.progressBar.style.width = `${percent}%`;
    elements.progressText.textContent = `Step ${step} of ${maxSteps}`;
    elements.progressPercent.textContent = `${percent}%`;
}

function showStep(stepId) {
    elements.steps.forEach(step => step.classList.remove('active'));
    document.getElementById(stepId).classList.add('active');
    updateProgress(currentStepNum, totalSteps);
}

function showResult(awardName, description, isProfessional = false) {
    elements.awardResult.innerHTML = `
        <h3 class="text-lg font-semibold">${awardName}</h3>
        <p class="text-gray-600 mt-1">${description}</p>`;
    
    if (isProfessional) {
        elements.awardResult.className = 'p-4 rounded-lg result-box';
        elements.payCalculator.style.display = 'block';
        updatePayCalculation();
    } else {
        elements.awardResult.className = 'p-4 rounded-lg info-box';
        elements.payCalculator.style.display = 'none';
    }
    showStep('result-section');
    elements.restartBtn.style.display = 'flex';
    // Final progress update
    elements.progressBar.style.width = `100%`;
    elements.progressText.textContent = `Complete`;
    elements.progressPercent.textContent = `100%`;
}

function addQuestion(id, label, description, options) {
    // Remove any dynamically added questions that come after the current one
    const existingDynamicQuestion = document.getElementById(`step-${id}`);
    if(existingDynamicQuestion) {
        existingDynamicQuestion.remove();
    }
    
    const newStep = document.createElement('div');
    newStep.id = `step-${id}`;
    newStep.className = 'step-card space-y-4';
    
    let optionsHtml = '<option value="" selected disabled>Select an option...</option>';
    options.forEach(opt => {
        optionsHtml += `<option value="${opt.value}">${opt.text}</option>`;
    });

    newStep.innerHTML = `
        <label for="select-${id}" class="block text-lg font-semibold text-gray-700">${currentStepNum}. ${label}</label>
        <p class="text-sm text-gray-500">${description}</p>
        <select id="select-${id}" class="w-full p-3 bg-gray-50 border border-gray-300 rounded-lg">
            ${optionsHtml}
        </select>`;
    
    elements.container.insertBefore(newStep, document.getElementById('result-section'));
    elements.steps = document.querySelectorAll('.step-card'); // Refresh node list
    
    const newSelect = document.getElementById(`select-${id}`);
    newSelect.addEventListener('change', (e) => handleDynamicChange(id, e.target.value));
    return newSelect;
}

function handleDynamicChange(id, value) {
    state[id] = value;
    currentStepNum++;
    
    // Qualified IT Employee Path
    if (id === 'qualified-industry' && value === 'yes') {
        showResult(
            "Professional Employees Award [MA000065]",
            "The employee appears to be covered as they are a qualified IT employee working for an employer in the IT or Telecommunications Services industry.",
            true
        );
    } else if (id === 'qualified-industry' && value === 'no') {
        addQuestion(
            'qualified-clerical',
            'Is the employee\'s role mainly clerical or administrative?',
            'This is not common for qualified IT employees but can occur.',
            [{ value: 'yes', text: 'Yes' }, { value: 'no', text: 'No' }]
        );
        showStep('step-qualified-clerical');
    } else if (id === 'qualified-clerical' && value === 'yes') {
        showResult(
            "Clerks Award",
            "A qualified IT employee not covered by an industry award whose role is mainly clerical may be covered by the Clerks Award."
        );
    } else if (id === 'qualified-clerical' && value === 'no') {
         showResult(
            "Potentially Award Free or covered by another Industry Award",
            "A qualified IT employee not covered by the Professional or Clerks awards may be award free, or covered by another industry-specific award (e.g., Banking, Finance and Insurance Award) if applicable."
        );
    }
    
    // Unqualified IT Employee Path
    else if (id === 'unqualified-industry' && value === 'business') {
        showResult(
            "Business Equipment Award",
            "Unqualified IT employees working for employers in the business equipment industry (e.g., selling, installing computers) may be covered by this award."
        );
    } else if (id === 'unqualified-industry' && value === 'telecom') {
         showResult(
            "Telecommunications Services Award",
            "Unqualified IT employees engaged as telecommunications technicians in the telecommunications industry may be covered by this award."
        );
    } else if (id === 'unqualified-industry' && value === 'bfi') {
         showResult(
            "Banking, Finance and Insurance Award",
            "Unqualified IT employees working for employers in the banking, finance, or insurance industries may be covered by this award."
        );
    } else if (id === 'unqualified-industry' && value === 'none') {
        addQuestion(
            'unqualified-clerical',
            'Is the employee\'s role mainly clerical or administrative?',
            'Determine if the Clerks award may apply.',
            [{ value: 'yes', text: 'Yes' }, { value: 'no',text: 'No' }]
        );
        showStep('step-unqualified-clerical');
    } else if (id === 'unqualified-clerical' && value === 'yes') {
        showResult(
            "Clerks Award",
            "An unqualified IT employee not covered by an industry award whose role is mainly clerical may be covered by the Clerks Award."
        );
    } else if (id === 'unqualified-clerical' && value === 'no') {
        showResult(
            "Miscellaneous Award or Award Free",
            "An unqualified IT employee not covered by an industry or other occupational award may be covered by the Miscellaneous Award, unless they are a managerial employee. Otherwise, they are award free."
        );
    }
}

elements.isItEmployee.addEventListener('change', (e) => {
    currentStepNum = 2;
    if (e.target.value === 'yes') {
        showStep('step-it-qualified');
    } else {
        showResult(
            "Professional Employees Award [MA000065]",
            "The employee is not in an IT role, but falls under another professional category covered by this award (e.g., Medical Research, Quality Auditing).",
            true
        );
    }
});

document.getElementById('is-qualified').addEventListener('change', (e) => {
    currentStepNum = 3;
    if (e.target.value === 'yes') {
        addQuestion(
            'qualified-industry',
            'Does the employer operate in the IT or Telecommunications Services industry?',
            'This determines industry coverage under the Professional Award.',
            [{ value: 'yes', text: 'Yes' }, { value: 'no', text: 'No' }]
        );
        showStep('step-qualified-industry');
    } else {
        addQuestion(
            'unqualified-industry',
            'In which industry does the employer operate?',
            'This helps determine if another industry award applies to the unqualified IT employee.',
            [
                { value: 'business', text: 'Business Equipment (selling/installing computers)' },
                { value: 'telecom', text: 'Telecommunications' },
                { value: 'bfi', text: 'Banking, Finance, or Insurance' },
                { value: 'none', text: 'None of the above' }
            ]
        );
        showStep('step-unqualified-industry');
    }
});

function updatePayCalculation() {
    const classification = document.getElementById('classification').value;
    const employmentType = document.querySelector('input[name="employment-type"]:checked').value;
    const workPeriod = document.getElementById('work-period').value;
    
    const rate = payData[employmentType]?.[classification]?.[workPeriod];
    
    if (rate) {
        elements.payResult.innerHTML = `Calculated Hourly Rate: <span class="text-3xl font-bold text-green-700">$${rate.toFixed(2)}</span>`;
        elements.payResult.className = 'p-4 rounded-lg result-box';
    } else {
        elements.payResult.innerHTML = `Rate not found for selected combination.`;
        elements.payResult.className = 'p-4 rounded-lg error-box';
    }
}

function updateAllowance() {
    const km = parseFloat(elements.vehicleKm.value) || 0;
    if (km > 0) {
        const allowance = km * 0.98;
        elements.allowanceResult.innerHTML = `Vehicle Allowance: <span class="text-xl font-bold text-indigo-700">$${allowance.toFixed(2)}</span>`;
        elements.allowanceResult.className = 'p-3 rounded-lg info-box';
    } else {
        elements.allowanceResult.innerHTML = '';
    }
}

document.getElementById('pay-calculator').addEventListener('change', updatePayCalculation);
elements.vehicleKm.addEventListener('input', updateAllowance);

elements.restartBtn.addEventListener('click', () => {
    window.location.reload();
});

// Initial state
updateProgress(1, totalSteps);
updatePayCalculation();
</script>
</body>
</html>

